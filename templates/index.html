<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Book Collection</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css"
          integrity="sha384-xOolHFLEh07PJGoPkLv1IbcEPTNtaed2xpHsD9ESMhqIYd0nLMwNLD69Npy4HI+N" crossorigin="anonymous">
</head>


<nav class="navbar navbar-expand-lg navbar-light bg-light">
    <a class="navbar-brand" href="/">Book Collection</a>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
    </button>

    <div class="collapse navbar-collapse" id="navbarSupportedContent">
        <ul class="navbar-nav mr-auto">
            <li class="nav-item active">
                <a class="nav-link" href="/">Your Books <span class="sr-only">(current)</span></a>
            </li>
            <li class="nav-item">
                <a class="nav-link" type="button" data-toggle="modal" data-target="#addBookModal">Add Book</a>

        </ul>
    </div>

</nav>


<body class="bg-secondary">

<div class="jumbotron mt-5 bg-white">
    <div class="float-left">
        <h3>Book Collection</h3>
        {% if alert != "" and alertsearch != "No book title match" %}
            <div id="alert-message" class="alert alert-secondary" role="alert">
                {{alert}}
                <button type="button" name="btn" value="add" class="close" data-dismiss="alert" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            {% endif %}

    </div>

    <div class="float-right">
         <form method="POST" id="search-form" action="/search">
            <input type="text" name="query">
            <button type="submit">Search</button>
         </form>

            {% if alertsearch == "No book title match" %}
                <div id="alert-message-search" class="alert alert-secondary" role="alert">
                    {{alertsearch}}
                    <button type="button" name="closealert" class="close" data-dismiss="alert" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
            {% endif %}
    </div>




    <h5>
        <!-- Button trigger modal -->
        <button type="button" class="btn btn-secondary btn-small ml-3" data-toggle="modal"
                data-target="#addBookModal">
            Add New Book
        </button>


        <!-- Modal -->
        <div class="modal fade bd-example-modal-lg" id="addBookModal" tabindex="-1" role="dialog"
             aria-labelledby="myLargeModalLabel" aria-hidden="true">
            <div class="modal-dialog modal-lg modal-dialog-centered" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="addBookModalTitle">Add New Book</h5>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                    </div>

                    <div class="modal-body">

                        <form method="POST" action="/">
                            <div class="form-group row">
                                <label for="title" class="col-sm-2 col-form-label">Title </label>
                                <div class="col-sm-10">
                                    <input id="title" type="text" class="form-control" name="title" required>
                                </div>
                            </div>

                            <div class="form-group row">
                                <label for="author" class="col-sm-2 col-form-label">Author </label>
                                <div class="col-sm-10">
                                    <input id="author" type="text" class="form-control" name="author" required>
                                </div>
                            </div>

                            <div class="form-group">
                                <label for="description"> Description</label>
                                <textarea name="description" class="form-control" id="description" rows="3"
                                          required></textarea>
                            </div>

                            <div class="form-group row">
                                <label for="type" class="col-sm-2 col-form-label">Type </label>
                                <div class="col-sm-4">
                                    <select name="type" class="custom-select col-sm-10" id="type" required>
                                        <option selected value="Paperback">Paperback</option>
                                        <option value="Hardcover">Hardcover</option>
                                        <option value="Ebook">Ebook</option>
                                        <option value="Audiobook">Audiobook
                                    </select>
                                </div>
                            </div>


                            <fieldset class="form-group">
                                <div class="row">
                                    <legend class="col-form-label col-sm-2 pt-0">Rating</legend>
                                    <div class="col-sm-10">

                                        <div class="form-check">
                                            <input class="form-check-input" type="radio" name="rating" id="rating1"
                                                   value="1" checked required>
                                            <label class="form-check-label" for="rating">
                                                ★☆☆☆☆
                                            </label>
                                        </div>

                                        <div class="form-check">
                                            <input class="form-check-input" type="radio" name="rating" id="rating2"
                                                   value="2" required>
                                            <label class="form-check-label" for="rating">
                                                ★★☆☆☆
                                            </label>
                                        </div>

                                        <div class="form-check">
                                            <input class="form-check-input" type="radio" name="rating" id="rating3"
                                                   value="3" required>
                                            <label class="form-check-label" for="rating">
                                                ★★★☆☆
                                            </label>
                                        </div>

                                        <div class="form-check">
                                            <input class="form-check-input" type="radio" name="rating" id="rating4"
                                                   value="4" required>
                                            <label class="form-check-label" for="rating">
                                                ★★★★☆
                                            </label>
                                        </div>

                                        <div class="form-check">
                                            <input class="form-check-input" type="radio" name="rating" id="rating5"
                                                   value="5" required>
                                            <label class="form-check-label" for="rating">
                                                ★★★★★
                                            </label>
                                        </div>

                                    </div>
                                </div>
                            </fieldset>

                            <div class="form-group">
                                <label for="comments"> Comments:</label>
                                <textarea name="comments" class="form-control" id="comments" rows="3"
                                          required></textarea>
                            </div>

                            <div class="form-group row">
                                <label for="date_added" class="col-sm-2 col-form-label">Date </label>
                                <div class="col-sm-10">
                                    <input type="date" id="date_added" name="date_added" class="form-control" placeholder="dd/mm/yyyy"
                                           required>
                                </div>
                            </div>

                            <div class="form-group row">
                                <div class="col-sm-10">
                                    <button type="submit" class="btn btn-primary"> Submit</button>
                                </div>
                            </div>
                        </form>





                    </div>
                </div>
            </div>
        </div>
    </h5>

    <table class="table bg-white mt-5">
        <tr>
            <th>Title</th>
            <th>Author</th>
            <th>Description</th>
            <th>Type</th>
            <th>Rating</th>
            <th>Comments</th>
            <th>Date Added</th>
        </tr>
        <tr>
        {% for i in books %}

            <td>{{i[0]}}</td>
            <td>{{i[1]}}</td>
            <td>{{i[2]}}</td>
            <td>{{i[3]}}</td>
            <td>{{i[4]}}</td>
            <td>{{i[5]}}</td>
            <td>{{i[6]}}</td>
            <td><a href="/editbook/{{i[0]}}" type="button" class="btn btn-outline-primary float-right">Edit</a></td>
            <td><a href="/delete/{{i[0]}}" class="btn btn-outline-danger" role="button">Delete</a></td>
        </tr>
                {% endfor %}

        <!--the search function-->

        {% for result in results %}
        <tr>
                <td>{{result[0]}}</td>
                <td>{{result[1]}}</td>
                <td>{{result[2]}}</td>
                <td>{{result[3]}}</td>
                <td>{{result[4]}}</td>
                <td>{{result[5]}}</td>
                <td>{{result[6]}}</td>
                <td><a href="/editbook/{{result[0]}}" type="button" class="btn btn-outline-primary float-right">Edit</a></td>
                <td><a href="/delete/{{result[0]}}" class="btn btn-outline-danger" role="button">Delete</a></td>
            </tr>
      {% endfor %}
    </table>






<script src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.slim.min.js"
        integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj"
        crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-Fy6S3B9q64WdZWQUiU+q4/2Lc9npb8tCaSX9FK7E8HnRr0Jz8D6OP9dO5Vg3Q9ct"
        crossorigin="anonymous"></script>
</div>
</body>
</html>


